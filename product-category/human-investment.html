<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>استثمر في رحلتك نحو النور</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <style>
        :root {
            --gold: #FFD700;
            --dark-bg: #0A1628;
        }
        
        body {
            background: var(--dark-bg);
            color: white;
            font-family: 'Cairo', sans-serif;
        }
        
        .hero-section {
            min-height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 50px 20px;
        }
        
        .journey-cards {
            padding: 50px 20px;
        }
        
        .journey-card {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .journey-card:hover {
            border-color: var(--gold);
            transform: translateY(-5px);
        }
        
        .pricing-table {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 50px 0;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1>استثمر في رحلتك نحو النور</h1>
            <p>اختر المسار المناسب لك</p>
        </div>
    </section>
    
    <!-- Journey Cards -->
    <section class="journey-cards">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="journey-card" data-journey="individual">
                        <h3>رحلتي الفردية</h3>
                        <p>ابدأ رحلتك الشخصية</p>
                        <div class="price">يبدأ من <span id="individualPrice">----</span> ج.م</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="journey-card" data-journey="group">
                        <h3>رحلتنا الجماعية</h3>
                        <p>انضم مع أصدقائك</p>
                        <div class="price">خصم حتى <span id="groupDiscount">--</span>%</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="journey-card" data-journey="support">
                        <h3>رحلة بالدعم</h3>
                        <p>منح ودعم مرن</p>
                        <div class="price"><span id="grantsAvailable">--</span> منحة متاحة</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Basic Pricing Table -->
    <section class="pricing-section">
        <div class="container">
            <div class="pricing-table">
                <h2>جدول الأسعار</h2>
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <th>النوع</th>
                            <th>السعر</th>
                            <th>الخصم</th>
                            <th>السعر النهائي</th>
                        </tr>
                    </thead>
                    <tbody id="pricingTableBody">
                        <!-- سيتم ملؤه بـ JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    
    <script>
        // Firebase Config
        const firebaseConfig = {
            // your config here
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        // Course Data
        let courseData = {};
        
        // Load Course Data
        async function loadCourseData() {
            try {
                // Get course ID from URL
                const urlParams = new URLSearchParams(window.location.search);
                const courseId = urlParams.get('id') || 'default_course_id';
                
                // Load from Firebase
                const doc = await db.collection('courses').doc(courseId).get();
                if (doc.exists) {
                    courseData = doc.data();
                    displayData();
                }
            } catch (error) {
                console.error('Error loading course:', error);
            }
        }
        
        // Display Basic Data
        function displayData() {
            // Individual Price
            document.getElementById('individualPrice').textContent = 
                courseData.salePrice || courseData.price || '----';
            
            // Group Discount
            const maxGroupDiscount = Math.max(
                ...(courseData.groupDiscounts?.map(g => g.percentage) || [0])
            );
            document.getElementById('groupDiscount').textContent = maxGroupDiscount || '--';
            
            // Grants Available
            document.getElementById('grantsAvailable').textContent = 
                courseData.grants?.seats || '0';
            
            // Basic Table
            buildBasicTable();
        }
        
        // Build Basic Table
        function buildBasicTable() {
            const tbody = document.getElementById('pricingTableBody');
            tbody.innerHTML = '';
            
            // Add rows based on available data
            if (courseData.price) {
                tbody.innerHTML += `
                    <tr>
                        <td>السعر الأساسي</td>
                        <td>${courseData.price} ج.م</td>
                        <td>-</td>
                        <td>${courseData.price} ج.م</td>
                    </tr>
                `;
            }
            
            if (courseData.salePrice) {
                const discount = Math.round((1 - courseData.salePrice / courseData.price) * 100);
                tbody.innerHTML += `
                    <tr>
                        <td>السعر الحالي</td>
                        <td>${courseData.price} ج.م</td>
                        <td>${discount}%</td>
                        <td>${courseData.salePrice} ج.م</td>
                    </tr>
                `;
            }
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', loadCourseData);
    </script>
</body>
</html>
